@inject HttpClient Http

@if (!string.IsNullOrEmpty(alwaysVisibleHtml))
{
    <div class="holiday-logic-info">
        @((MarkupString)alwaysVisibleHtml)

        <button class="collapse-btn" @onclick="Toggle">
            @(isExpanded ? "▼" : "▶") Public Holiday Substitution Rules
        </button>
        @if (isExpanded && collapsibleHtml is not null)
        {
            <div class="holiday-logic-content">
                @((MarkupString)collapsibleHtml)
            </div>
        }
    </div>
}

@code {
    string? alwaysVisibleHtml;
    string? collapsibleHtml;
    bool isExpanded;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            alwaysVisibleHtml = await Http.GetStringAsync("holiday-logic.html");
            collapsibleHtml = await Http.GetStringAsync("holiday-logic-collapsible.html");
        }
        catch
        {
            alwaysVisibleHtml = null;
            collapsibleHtml = null;
        }
    }

    void Toggle() => isExpanded = !isExpanded;
}
